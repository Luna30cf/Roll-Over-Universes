{% extends 'base.html.twig' %}

{% block title %}Produits
{% endblock %}

{% block content %}
	<h1>Nos Produits</h1>
	<p>Liste des produits à venir...</p>
	<a href="{{ path('homepage') }}">Retour à l'accueil</a>
	{% set produits = [
    { "nom": "Chaise moderne", "categorie": "Meubles", "prix": 120 },
    { "nom": "Table en bois", "categorie": "Meubles", "prix": 250 },
    { "nom": "Lampe design", "categorie": "Décoration", "prix": 80 },
    { "nom": "Canapé 3 places", "categorie": "Meubles", "prix": 600 },
    { "nom": "Tableau abstrait", "categorie": "Décoration", "prix": 150 }
] %}

	<!DOCTYPE html>
	<html lang="fr">
		<head>
			<meta charset="UTF-8">
			<meta name="viewport" content="width=device-width, initial-scale=1.0">
			<title>Produits</title>
			<script defer src="script.js"></script>
			<script src="https://cdn.tailwindcss.com"></script>
		</head>
		<body class="p-8">
			<div class="max-w-4xl mx-auto">
				<input type="text" id="search" placeholder="Rechercher un produit..." class="p-2 border rounded w-full mb-4">
				<select id="category" class="p-2 border rounded w-full mb-4">
					<option value="">Toutes les catégories</option>
					<option value="Meubles">Meubles</option>
					<option value="Décoration">Décoration</option>
				</select>
				<input type="number" id="minPrice" placeholder="Prix min" class="p-2 border rounded w-1/2 mb-4">
				<input type="number" id="maxPrice" placeholder="Prix max" class="p-2 border rounded w-1/2 mb-4">

				<div id="product-list" class="grid grid-cols-1 md:grid-cols-2 gap-4">
					{% for produit in produits %}
						<div class="product border p-4 rounded shadow" data-nom="{{ produit.nom }}" data-categorie="{{ produit.categorie }}" data-prix="{{ produit.prix }}">
							<h2 class="text-xl font-bold">{{ produit.nom }}</h2>
							<p class="text-gray-600">Catégorie:
								{{ produit.categorie }}</p>
							<p class="text-gray-800 font-semibold">Prix:
								{{ produit.prix }}
								€</p>
						</div>
					{% endfor %}
				</div>
			</div>

			<script>
				document.addEventListener("DOMContentLoaded", function () {
const searchInput = document.getElementById("search");
const categoryFilter = document.getElementById("category");
const minPriceFilter = document.getElementById("minPrice");
const maxPriceFilter = document.getElementById("maxPrice");
const products = document.querySelectorAll(".product");

function filterProducts() {
const searchText = searchInput.value.toLowerCase();
const category = categoryFilter.value;
const minPrice = parseFloat(minPriceFilter.value) || 0;
const maxPrice = parseFloat(maxPriceFilter.value) || Infinity;

products.forEach(product => {
const name = product.dataset.nom.toLowerCase();
const productCategory = product.dataset.categorie;
const price = parseFloat(product.dataset.prix);

const matchesSearch = name.includes(searchText);
const matchesCategory = category === "" || productCategory === category;
const matchesPrice = price >= minPrice && price <= maxPrice;

if (matchesSearch && matchesCategory && matchesPrice) {
product.style.display = "block";
} else {
product.style.display = "none";
}
});
}

searchInput.addEventListener("input", filterProducts);
categoryFilter.addEventListener("change", filterProducts);
minPriceFilter.addEventListener("input", filterProducts);
maxPriceFilter.addEventListener("input", filterProducts);
});
			</script>
		</body>
	</html>


{% endblock %}
